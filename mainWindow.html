<!DOCTYPE html>
<html lang="en">
    <head>
        <title>PasswordStorage</title>
        <link rel="stylesheet" type="text/css" href="style.css">
        <script src="https://kit.fontawesome.com/3849555537.js" crossorigin="anonymous"></script>
    </head>
    <body>
        <table cellspacing="0" cellpadding="10" class="passwords">

        </table>

        <script>
            function myFunction(x) {
                var pass = document.querySelectorAll("#pass");
                if (pass[x].type === "password") {
                    pass[x].type = "text";
                } else {
                    pass[x].type = "password";
                }
            } 
        </script>
        <script>
            function deletePassword(i){
                const electron = require('electron');
                const {ipcRenderer} = electron;

                const item = {
                    index: i
                }    
                ipcRenderer.send('password:delete', item);
            }
        </script>

        <script>
            const electron = require('electron');
            const {ipcRenderer} = electron;
            const ul = document.querySelector('.passwords');
            ipcRenderer.on('password:update', function(e, decryptedDatabase){
                ul.innerHTML = "";
                for(let i=0; i<decryptedDatabase.length; i++){
                    const li = document.createElement('tr');
                    li.innerHTML = 
                    `
                    <td><img src="./images/f_logo_RGB-Hex-Blue_512.png"></td>
                    <td>${decryptedDatabase[i].service}</td>
                    <td>Lorenzo</td>
                    <td><input type="password" value="${decryptedDatabase[i].password}" id="pass"><input type="checkbox" onclick="myFunction(${i})">Show</td>
                    <td><i class="fas fa-trash" onclick="deletePassword(${i})"></i></td>
                    `
                    ul.appendChild(li);
                }
            })

        </script>
    </body>
</html>